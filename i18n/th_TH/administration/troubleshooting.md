# การแก้ไขปัญหา

## ตรวจสอบบันทึก

เพื่อที่จะแก้ไขปัญหา, คุณต้องตรวจสอบแฟ้มบันทึกข้อผิดพลาด

#### บันทึกข้อผิดพลาด EspoCRM

บันทึก EspoCRM อยู่ที่ `<ESPOCRM_DIRECTORY>/logs/*.log` และมีข้อมูลข้อผิดพลาดบางอย่าง

#### บันทึกข้อผิดพลาดของ Apache

สำหรับเซิร์ฟเวอร์ Ubuntu มีบันทึกข้อผิดพลาดของ apache อยู่ที่ `/var/log/apache2/error.log` และมีข้อมูลข้อผิดพลาดทั้งหมด ตำแหน่งของแฟ้มบันทึกอาจแตกต่างกันในระบบอื่น ๆ

## Enable debugging mode

เพื่อเปิดใช้งานโหมดดีบัก, ไปที่ติดตั้ง EspoCRM directory, เปิดแฟ้มข้อมูล `data/config.php` และเปลี่ยนค่า:

```
'logger' => [
    ...
    'level' => 'WARNING',
    ...
]
```
to
```
'logger' => [
    ...
    'level' => 'DEBUG',
    ...
]
```

## งานที่กำหนดเวลาไว้ไม่ทำงาน

#### ปัญหาที่ 1: crontab ของคุณไม่ได้รับการกำหนดค่า

1. เข้าสู่ระบบผ่าน SSH ไปยังเซิร์ฟเวอร์ของคุณ

2.ตั้งค่าคอนฟิก crontab โดยทำตามขั้นตอนดังต่อไปนี้: https://www.espocrm.com/documentation/administration/server-configuration/#user-content-setup-a-crontab.

หมายเหตุ: ควรกำหนดค่า Crontab ภายใต้ผู้ใช้เว็บเซิร์ฟเวอร์ เช่น `crontab -e -u www-data`.

3. รอสักครู่และตรวจสอบงานที่จัดกำหนดการไว้ เพื่อดูว่ามีงานหรือไม่ (see a Log panel)

#### ปัญหาที่ # 2 มีการกำหนดค่า Crontab แต่ Scheduled Jobs ไม่ทำงาน

เพื่อให้แน่ใจว่าไม่มีข้อผิดพลาดเมื่อรัน cron ให้ลองเรียกใช้คำสั่ง cron ใน terminal:

1. เข้าสู่ระบบผ่าน SSH ไปยังเซิร์ฟเวอร์ของคุณ

2. ไปที่ directory ที่มีการติดตั้ง EspoCRM  เช่น สำหรับ directory `/var/www/html/espocrm`  คำสั่งคือ :

```bash
cd /var/www/html/espocrm
```

3. เรียกใช้คำสั่ง crontab:

```bash
php cron.php
```

หมายเหตุ: ควรดำเนินการภายใต้ผู้ใช้เว็บเซิร์ฟเวอร์ ถ้าคุณล็อกอินด้วย root คำสั่งควรเป็น (เช่น สำหรับ Ubuntu):

```bash
sudo -u www-data php cron.php
```

ที่ไหนที่ `www-data` เป็นผู้ใช้เว็บเซิร์ฟเวอร์

4. หากไม่มีข้อผิดพลาดให้ตรวจสอบงานที่จัดกำหนดการไว้เพื่อดูว่ามีงานใดหรือไม่(see a Log panel).

## EspoCRM ไม่โหลดหลังจากทำการอัปเดตแล้ว

สิ่งนี้อาจเกิดขึ้นได้ใน hostings ที่ใช้ร่วมกันบางครั้ง

ตรวจสอบสิทธิ์ของไฟล์:
/index.php
/api/v1/index.php

ควรจะเป็น 644  ถ้าไฟล์ใดมีสิทธิ์เป็น 664 คุณต้องเปลี่ยนเป็น 644 ใช้แผงควบคุมของโฮสติ้งหรือคำสั่ง chmod

```
chmod 644 /path/to/file
```
ข้อมูลเพิ่มเติมเกี่ยวกับสิทธิ์ของไฟล์: [here](server-configuration.md#required-permissions-for-unix-based-systems).
